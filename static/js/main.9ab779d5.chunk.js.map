{"version":3,"sources":["components/AssetToken.jsx","web3/reducer.js","web3/index.js","components/NftPreview.jsx","components/Marketplace.jsx","App.jsx","index.js"],"names":["nifty","Web3Reducer","state","action","type","wallet","payload","provider","web3","initialState","loading","web3Modal","Web3Modal","providerOptions","cacheProvider","Web3Context","createContext","Web3Provider","children","useReducer","dispatch","setWallet","setProvider","setWeb3","logout","close","currentProvider","initWeb3","Web3","eth","extend","methods","name","call","outputFormatter","utils","hexToNumber","subscribeProvider","data","on","accounts","address","toLowerCase","getBalance","balance","chainId","newChainId","connectWeb3","useCallback","connect","getAccounts","console","error","useEffect","cachedProvider","Provider","value","Token","contract","thumb","price","tokenID","chain","Nifty","findChainById","className","style","border","padding","margin","alignItems","to","color","width","height","display","justifyContent","src","alt","maxWidth","maxHeight","textOverflow","whiteSpace","overflow","chains","sortOptions","label","Marketplace","queryParams","URLSearchParams","window","location","search","useState","nfts","setNfts","isChainIdRequired","setIsChainIdRequired","useContext","options","sort","get","contractAddress","connectedChainId","limit","skip","key","env","envs","TESTNET","getNFTs","then","res","catch","e","log","substring","length","onClick","gap","id","form","defaultValue","marginRight","map","option","placeholder","onChange","target","required","flexWrap","nft","NftPreview","AssetToken","useParams","nftId","setNft","userAvailableMethods","setUserAvailableMethods","paymentMethods","setPaymentMethods","initWallet","networkTypes","EVM","getAllNFTData","canSell","availableMethodsRes","getAvailablePaymentMethods","buy","nftToBuy","isExternalOrder","setStatusListener","status","orderId","externalOrderId","list","nftToSell","preventDefault","offer","cancelOrder","nftToCancel","preview","contractName","externalOrderPrice","description","onSubmit","canOffer","canBuy","canCancel","attributes","attribute","trait_type","App","path","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.9ab779d5.chunk.js","sourcesContent":["import { useParams } from 'react-router-dom';\nimport Nifty from 'nifty-protocol';\nimport { useContext, useEffect, useState } from 'react';\nimport { Web3Context } from '../web3';\n\nlet nifty;\n\nconst AssetToken = () => {\n  const { contractAddress, chainId, nftId } = useParams();\n  const { provider, wallet, connectWeb3 } = useContext(Web3Context);\n\n  const [nft, setNft] = useState({});\n  const [userAvailableMethods, setUserAvailableMethods] = useState(null);\n  const [paymentMethods, setPaymentMethods] = useState(null);\n\n  useEffect(() => {\n    nifty = new Nifty({ env: Nifty.envs.TESTNET });\n\n    if (provider) {\n      nifty.initWallet(Nifty.networkTypes.EVM, provider);\n    }\n\n    nifty.getAllNFTData(contractAddress, nftId, chainId)\n      .then((res) => {\n        setNft(res.nft);\n        setUserAvailableMethods(res.userAvailableMethods);\n\n        if (res.userAvailableMethods?.canSell) {\n          const availableMethodsRes = nifty.getAvailablePaymentMethods(chainId);\n          setPaymentMethods(availableMethodsRes);\n        }\n      });\n  }, [provider]);\n\n  const buy = async (nftToBuy, isExternalOrder) => {\n    nifty.initWallet(Nifty.networkTypes.EVM, provider);\n    nifty.setStatusListener((status) => console.log(status));\n\n    // external orders can be looksrare / opensea / rarible\n    const orderId = isExternalOrder ? nftToBuy.externalOrderId : nftToBuy.orderId;\n\n    try {\n      await nifty.buy(orderId, isExternalOrder);\n    } catch (e) {\n      console.error('e', e);\n    }\n  };\n\n  const list = async (e, nftToSell) => {\n    e.preventDefault();\n\n    nifty.initWallet(Nifty.networkTypes.EVM, provider);\n    nifty.setStatusListener((status) => console.log(status));\n\n    const expirationTime = 86400; // in 1 day\n\n    try {\n      await nifty.list(\n        nftToSell,\n        e.target.price.value,\n        expirationTime,\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const offer = async (e, nftToBuy) => {\n    e.preventDefault();\n\n    nifty.initWallet(Nifty.networkTypes.EVM, provider);\n    nifty.setStatusListener((status) => console.log(status));\n\n    const expirationTime = 86400; // in 1 day\n\n    try {\n      nifty.offer(\n        nftToBuy,\n        e.target.price.value,\n        expirationTime,\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const cancelOrder = async (nftToCancel) => {\n    nifty.initWallet(Nifty.networkTypes.EVM, provider);\n    nifty.setStatusListener((status) => console.log(status));\n\n    try {\n      await nifty.cancelOrder(nftToCancel.orderId);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  if (!nft) return <></>;\n\n  return (\n    <div>\n      {!wallet\n            && (\n            <header>\n              <button type=\"button\" onClick={connectWeb3}>\n                Connect to MetaMask\n              </button>\n            </header>\n            )}\n\n      <img src={nft.preview} alt={nft.name} style={{ maxWidth: '300px', maxHeight: '300px' }} />\n      <h1>{nft.contractName}</h1>\n      <h2>{nft.name}</h2>\n\n      {\n        nft.price && (\n          <h3>\n            Price:\n            {nft.price}\n          </h3>\n        )\n      }\n\n      {\n        nft.externalOrderPrice && (\n          <h3>\n            External Order Price:\n            {nft.externalOrderPrice}\n          </h3>\n        )\n      }\n\n      <h5>\n        Description:\n        {nft.description}\n      </h5>\n\n      <div>\n        {userAvailableMethods?.canSell\n          && (\n            <form onSubmit={(e) => { list(e, nft); }}>\n              <input\n                name=\"price\"\n                placeholder=\"price\"\n                style={{ height: '30px', width: '200px', marginRight: '10px' }}\n              />\n\n              {\n                paymentMethods && (\n                  <select\n                    defaultValue={paymentMethods[0].value}\n                    name=\"paymentMethod\"\n                    style={{ height: '30px', width: '200px', marginRight: '10px' }}\n                  >\n                    {paymentMethods.map((option) => (\n                      <option key={option.address} value={option.address}>{option.value}</option>\n                    ))}\n                  </select>\n                )\n              }\n              <button type=\"submit\">List for sale</button>\n            </form>\n          )}\n        {\n          userAvailableMethods?.canOffer\n          && (\n            <form onSubmit={(e) => { offer(e, nft); }}>\n              <input\n                name=\"price\"\n                placeholder=\"price\"\n                style={{ height: '30px', width: '200px', marginRight: '10px' }}\n              />\n              <button type=\"submit\">offer</button>\n            </form>\n\n          )\n        }\n        {userAvailableMethods?.canBuy && <button onClick={() => buy(nft, false)} type=\"button\">Buy</button>}\n        {userAvailableMethods?.canCancel && <button onClick={() => cancelOrder(nft)} type=\"button\">Cancel Listing</button>}\n        {!!nft.externalOrderPrice && <button onClick={() => buy(nft, true)} type=\"button\">External Buy</button>}\n      </div>\n\n      <div>\n        {!!nft.attributes?.length && (\n          <>\n            <h2>Attributes:</h2>\n            {\n              nft.attributes.map((attribute) => (\n                <div key={`${attribute.trait_type}_${attribute.value}`}>\n                  {attribute.trait_type}\n                  :\n                  {attribute.value}\n                </div>\n              ))\n            }\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AssetToken;\n","export const Web3Reducer = (state, action) => {\n    switch (action.type) {\n      case \"SET_WALLET\":\n        return {\n          ...state,\n          wallet: action.payload,\n        };\n      case \"SET_PROVIDER\":\n        return {\n          ...state,\n          provider: action.payload,\n        };\n      case \"SET_WEB3\":\n        return {\n          ...state,\n          web3: action.payload,\n        };\n      default:\n        return state;\n    }\n  };","import {\n  createContext, useCallback, useReducer, useEffect,\n} from 'react';\nimport Web3 from 'web3';\nimport Web3Modal from 'web3modal';\n\nimport { Web3Reducer } from './reducer';\n\nconst initialState = {\n  loading : false,\n  wallet  : null,\n  provider: null,\n  web3    : null,\n};\n\nconst providerOptions = {\n  cacheProvider: true, // optional\n};\n\nconst web3Modal = new Web3Modal({\n  providerOptions,\n});\n\nexport const Web3Context = createContext(initialState);\n\nexport const Web3Provider = ({ children }) => {\n  const [state, dispatch] = useReducer(Web3Reducer, initialState);\n\n  const setWallet = (wallet) => {\n    dispatch({\n      type   : 'SET_WALLET',\n      payload: wallet,\n    });\n  };\n\n  const setProvider = (provider) => {\n    dispatch({\n      type   : 'SET_PROVIDER',\n      payload: provider,\n    });\n  };\n\n  const setWeb3 = (web3) => {\n    dispatch({\n      type   : 'SET_WEB3',\n      payload: web3,\n    });\n  };\n\n  const logout = () => {\n    const { web3, provider } = state;\n    if (provider.close) {\n      provider.close();\n    }\n    if (web3 && web3.currentProvider && web3.currentProvider.close) {\n      web3.currentProvider.close();\n    }\n    setWallet(null);\n    setProvider(null);\n    setWeb3(null);\n  };\n\n  const initWeb3 = (provider) => {\n    const web3 = new Web3(provider);\n\n    web3.eth.extend({\n      methods: [\n        {\n          name           : 'chainId',\n          call           : 'eth_chainId',\n          outputFormatter: web3.utils.hexToNumber,\n        },\n      ],\n    });\n\n    return web3;\n  };\n\n  const subscribeProvider = async (data, web3Modal, web3, provider) => {\n    if (!provider.on) {\n      return;\n    }\n    provider.on('close', async () => {\n      logout();\n    });\n    provider.on('accountsChanged', async (accounts) => {\n      const { wallet } = state;\n      if (!accounts[0]) {\n        logout();\n      } else {\n        const address = accounts[0].toLowerCase();\n        const balance = await web3.eth.getBalance(address);\n\n        setWallet({ ...wallet, address, balance });\n      }\n    });\n    provider.on('chainChanged', async (chainId) => {\n      const { wallet } = state;\n      const newChainId = await web3.eth.chainId();\n      const balance = await web3.eth.getBalance(wallet.data.address);\n      setWallet({\n        ...wallet, chainId: newChainId, balance,\n      });\n    });\n  };\n\n  const connectWeb3 = useCallback(async () => {\n    await connect();\n  }, []);\n\n  const connect = async () => {\n    try {\n      const provider = await web3Modal.connect();\n      setProvider(provider);\n\n      const web3 = initWeb3(provider);\n\n      setWeb3(web3);\n\n      const accounts = await web3.eth.getAccounts();\n\n      const address = accounts[0].toLowerCase();\n\n      const chainId = await web3.eth.chainId();\n\n      const balance = await web3.eth.getBalance(address);\n\n      const data = { address, chainId, balance };\n\n      setWallet(data);\n\n      subscribeProvider(data, web3Modal, web3, provider);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  useEffect(() => {\n    if (web3Modal.cachedProvider) {\n      connect();\n    }\n  }, []);\n\n  return (\n    <Web3Context.Provider\n      value={{\n        ...state,\n        connectWeb3,\n        logout,\n      }}\n    >\n      {children}\n    </Web3Context.Provider>\n  );\n};\n","import { Link } from 'react-router-dom';\nimport Nifty from 'nifty-protocol';\n\nconst Token = ({\n  contract, name, thumb, price, chainId, tokenID,\n}) => {\n  const chain = Nifty.utils.findChainById(chainId);\n  return (\n    <div\n      className=\"item\"\n      style={{\n        border: '1px solid', padding: '10px', margin: '10px', alignItems: 'center',\n      }}\n    >\n      <Link to={`/token/${chainId}/${contract.address}/${tokenID}`} style={{ color: 'black' }}>\n        <div style={{\n          width         : '200px',\n          height        : '200px',\n          display       : 'flex',\n          justifyContent: 'center',\n          alignItems    : 'center',\n        }}\n        >\n          <img src={thumb} alt=\"\" style={{ maxWidth: '200px', maxHeight: '200px' }} />\n        </div>\n        <h3 style={{\n          textOverflow: 'ellipsis', whiteSpace: 'nowrap', overflow: 'hidden', maxWidth: '200px',\n        }}\n        >\n          {contract.name}\n        </h3>\n        <h5 style={{\n          textOverflow: 'ellipsis', whiteSpace: 'nowrap', overflow: 'hidden', maxWidth: '200px',\n        }}\n        >\n          {name}\n        </h5>\n        <p>{price}</p>\n        <p>{chain.name}</p>\n      </Link>\n    </div>\n  );\n};\nexport default Token;\n","import { useContext, useEffect, useState } from 'react';\nimport Nifty from 'nifty-protocol';\nimport { Web3Context } from '../web3';\nimport NftPreview from './NftPreview';\n\nconst shortenAddress = (address) => address && `${address.substring(0, 5)}...${address.substring(address.length - 4, address.length)}`;\nlet nifty;\n\nconst chains = [\n  { chainId: '', name: 'All' },\n  { chainId: '1', name: 'Ethereum' },\n  { chainId: '137', name: 'Polygon' },\n  { chainId: '56', name: 'BNB' },\n  { chainId: '43114', name: 'Avalanche' },\n  { chainId: '1285', name: 'Moonriver' },\n  { chainId: '4', name: 'Rinkeby' },\n];\n\nconst sortOptions = [\n  { value: 'listed_desc', label: 'Recently Listed' },\n  { value: 'created_desc', label: 'Recently Minted' },\n  { value: 'sold_desc', label: 'Recently Sold' },\n  { value: 'price_asc', label: 'Price (Lowest to highest)' },\n  { value: 'price_desc', label: 'Price (Highest to lowest)' },\n  { value: 'last_sell_desc', label: 'Highest Last Sale' },\n];\n\nconst Marketplace = () => {\n  const queryParams = new URLSearchParams(window.location.search);\n  const [nfts, setNfts] = useState([]);\n  const [isChainIdRequired, setIsChainIdRequired] = useState(false);\n\n  const {\n    wallet,\n    connectWeb3,\n  } = useContext(Web3Context);\n\n  useEffect(() => {\n    const options = {\n      sort           : queryParams.get('sort') || 'listed_desc',\n      contractAddress: queryParams.get('contractAddress'),\n    };\n\n    if (queryParams.get('userAddress')) {\n      options.address = queryParams.get('userAddress').toLowerCase();\n    }\n    if (queryParams.get('chainId')) {\n      options.connectedChainId = queryParams.get('chainId');\n    }\n    if (queryParams.get('chain')) {\n      options.chains = [queryParams.get('chain')];\n    }\n    if (queryParams.get('search')) {\n      options.search = queryParams.get('search');\n    }\n    if (queryParams.get('limit')) {\n      options.limit = queryParams.get('limit');\n    }\n    if (queryParams.get('skip')) {\n      options.skip = queryParams.get('skip');\n    }\n\n    nifty = new Nifty({ key: 'test', env: Nifty.envs.TESTNET });\n\n    nifty.getNFTs(options)\n      .then((res) => setNfts(res))\n      .catch((e) => {\n        console.log('e', e);\n      });\n  }, []);\n\n  return (\n    <div>\n      <header>\n        {wallet ? shortenAddress(wallet.address)\n          : (\n            <button type=\"button\" onClick={connectWeb3}>\n              Connect to MetaMask\n            </button>\n          )}\n      </header>\n\n      <div>\n        <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\n          <form name=\"marketplace\" id=\"marketplace\">\n            <select\n              id=\"chains\"\n              name=\"chain\"\n              form=\"marketplace\"\n              defaultValue={queryParams.get('chain') || 'All'}\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            >\n              {chains.map((chain) => (\n                <option key={chain.chainId} value={chain.chainId}>{chain.name}</option>\n              ))}\n            </select>\n\n            <select\n              id=\"sort\"\n              name=\"sort\"\n              form=\"marketplace\"\n              defaultValue={queryParams.get('sort') || 'listed_desc'}\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            >\n              {sortOptions.map((option) => (\n                <option key={option.value} value={option.value}>{option.label}</option>\n              ))}\n            </select>\n\n            <input\n              id=\"search\"\n              name=\"search\"\n              placeholder=\"Search\"\n              defaultValue={queryParams.get('search')}\n              form=\"marketplace\"\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n\n            <input\n              id=\"userAddress\"\n              name=\"userAddress\"\n              placeholder=\"User Address\"\n              defaultValue={queryParams.get('userAddress')}\n              form=\"marketplace\"\n              onChange={(e) => setIsChainIdRequired(!!e.target.value)}\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n\n            <input\n              id=\"contractAddress\"\n              name=\"contractAddress\"\n              placeholder=\"Contract Address\"\n              defaultValue={queryParams.get('contractAddress')}\n              form=\"marketplace\"\n              onChange={(e) => setIsChainIdRequired(!!e.target.value)}\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n            <input\n              id=\"limit\"\n              name=\"limit\"\n              placeholder=\"limit (min 30 max 100)\"\n              defaultValue={queryParams.get('limit')}\n              form=\"marketplace\"\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n            <input\n              id=\"skip\"\n              name=\"skip\"\n              placeholder=\"skip\"\n              defaultValue={queryParams.get('skip')}\n              form=\"marketplace\"\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n\n            {\n            (isChainIdRequired || queryParams.get('chainId')) && (\n            <input\n              id=\"chainId\"\n              name=\"chainId\"\n              required={isChainIdRequired}\n              defaultValue={queryParams.get('chainId')}\n              placeholder=\"chainId\"\n              form=\"marketplace\"\n              style={{ height: '30px', width: '200px', marginRight: '10px' }}\n            />\n            )\n            }\n            <button type=\"submit\">submit</button>\n          </form>\n        </div>\n\n        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n          {nfts.map((nft) => (\n            <NftPreview\n              key={nft.id}\n              {...nft}\n            />\n          ))}\n        </div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default Marketplace;\n","import './style.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  HashRouter,\n  Route,\n} from 'react-router-dom';\nimport Marketplace from './components/Marketplace';\nimport AssetToken from './components/AssetToken';\n\nconst App = () => (\n  <Router>\n    <Switch>\n      <Route path=\"/user/:chainId/:userAddress\">\n        <Marketplace />\n      </Route>\n      <Route path=\"/token/:chainId/:contractAddress/:nftId\">\n        <AssetToken />\n      </Route>\n      <Route path=\"/collection/:chainId/:contractAddress\">\n        <Marketplace />\n      </Route>\n      <Route path=\"/\">\n        <Marketplace />\n      </Route>\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport { Web3Provider } from './web3';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Web3Provider>\n      <App />\n    </Web3Provider>\n  </React.StrictMode>,\n);\n"],"sourceRoot":""}