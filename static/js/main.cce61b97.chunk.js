(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{349:function(e,t,n){},390:function(e,t){},397:function(e,t){},398:function(e,t){},424:function(e,t){},426:function(e,t){},435:function(e,t){},437:function(e,t){},447:function(e,t){},449:function(e,t){},574:function(e,t){},576:function(e,t){},581:function(e,t){},583:function(e,t){},590:function(e,t){},602:function(e,t){},605:function(e,t){},610:function(e,t){},746:function(e,t,n){"use strict";n.r(t);var c,r=n(11),a=n.n(r),i=n(335),s=n.n(i),l=(n(349),n(130)),o=n(32),u=n(42),d=n(56),h=n(50),p=n.n(h),j=n(2),b=n(27),x=n(215),f=n.n(x),O=n(339),m=n.n(O),v=function(e,t){switch(t.type){case"SET_WALLET":return Object(u.a)(Object(u.a)({},e),{},{wallet:t.payload});case"SET_PROVIDER":return Object(u.a)(Object(u.a)({},e),{},{provider:t.payload});case"SET_WEB3":return Object(u.a)(Object(u.a)({},e),{},{web3:t.payload});default:return e}},g=n(8),y={loading:!1,wallet:null,provider:null,web3:null},w=new m.a({providerOptions:{cacheProvider:!0}}),k=Object(r.createContext)(y),I=function(e){var t=e.children,n=Object(r.useReducer)(v,y),c=Object(d.a)(n,2),a=c[0],i=c[1],s=function(e){i({type:"SET_WALLET",payload:e})},l=function(e){i({type:"SET_PROVIDER",payload:e})},o=function(e){i({type:"SET_WEB3",payload:e})},h=function(){var e=a.web3,t=a.provider;t.close&&t.close(),e&&e.currentProvider&&e.currentProvider.close&&e.currentProvider.close(),s(null),l(null),o(null)},p=function(e){var t=new f.a(e);return t.eth.extend({methods:[{name:"chainId",call:"eth_chainId",outputFormatter:t.utils.hexToNumber}]}),t},x=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n,c,r){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.on){e.next=2;break}return e.abrupt("return");case 2:r.on("close",Object(b.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h();case 1:case"end":return e.stop()}}),e)})))),r.on("accountsChanged",function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var n,r,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.wallet,t[0]){e.next=5;break}h(),e.next=10;break;case 5:return r=t[0].toLowerCase(),e.next=8,c.eth.getBalance(r);case 8:i=e.sent,s(Object(u.a)(Object(u.a)({},n),{},{address:r,balance:i}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.on("chainChanged",function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){var n,r,i;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.wallet,e.next=3,c.eth.chainId();case 3:return r=e.sent,e.next=6,c.eth.getBalance(n.data.address);case 6:i=e.sent,s(Object(u.a)(Object(u.a)({},n),{},{chainId:r,balance:i}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t,n,c,r){return e.apply(this,arguments)}}(),O=Object(r.useCallback)(Object(b.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:case"end":return e.stop()}}),e)}))),[]),m=function(){var e=Object(b.a)(Object(j.a)().mark((function e(){var t,n,c,r,a,i,u;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.connect();case 3:return t=e.sent,l(t),n=p(t),o(n),e.next=9,n.eth.getAccounts();case 9:return c=e.sent,r=c[0].toLowerCase(),e.next=13,n.eth.chainId();case 13:return a=e.sent,e.next=16,n.eth.getBalance(r);case 16:i=e.sent,s(u={address:r,chainId:a,balance:i}),x(u,w,n,t),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){w.cachedProvider&&m()}),[]),Object(g.jsx)(k.Provider,{value:Object(u.a)(Object(u.a)({},a),{},{connectWeb3:O,logout:h}),children:t})},E=function(e){var t=e.contract,n=e.name,c=e.thumb,r=e.price,a=e.chainId,i=e.tokenID,s=p.a.utils.findChainById(a);return Object(g.jsx)("div",{className:"item",style:{border:"1px solid",padding:"10px",margin:"10px",alignItems:"center"},children:Object(g.jsxs)(l.b,{to:"/token/".concat(a,"/").concat(t.address,"/").concat(i),style:{color:"black"},children:[Object(g.jsx)("div",{style:{width:"200px",height:"200px",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(g.jsx)("img",{src:c,alt:"",style:{maxWidth:"200px",maxHeight:"200px"}})}),Object(g.jsx)("h3",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"200px"},children:t.name}),Object(g.jsx)("h5",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"200px"},children:n}),Object(g.jsx)("p",{children:r}),Object(g.jsx)("p",{children:s.name})]})})},S=[{chainId:"",name:"All"},{chainId:"1",name:"Ethereum"},{chainId:"137",name:"Polygon"},{chainId:"56",name:"BNB"},{chainId:"43114",name:"Avalanche"},{chainId:"1285",name:"Moonriver"},{chainId:"4",name:"Rinkeby"}],A=[{value:"listed_desc",label:"Recently Listed"},{value:"created_desc",label:"Recently Minted"},{value:"sold_desc",label:"Recently Sold"},{value:"price_asc",label:"Price (Lowest to highest)"},{value:"price_desc",label:"Price (Highest to lowest)"},{value:"last_sell_desc",label:"Highest Last Sale"}],C=function(){var e,t=new URLSearchParams(window.location.search),n=Object(r.useState)([]),c=Object(d.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(!1),l=Object(d.a)(s,2),o=l[0],h=l[1],j=Object(r.useContext)(k),b=j.wallet,x=j.connectWeb3;return Object(r.useEffect)((function(){var e={sort:t.get("sort")||"listed_desc",contractAddress:t.get("contractAddress")};t.get("userAddress")&&(e.address=t.get("userAddress").toLowerCase()),t.get("chainId")&&(e.connectedChainId=t.get("chainId")),t.get("chain")&&(e.chains=[t.get("chain")]),t.get("search")&&(e.search=t.get("search")),t.get("limit")&&(e.limit=t.get("limit")),t.get("skip")&&(e.skip=t.get("skip")),new p.a({key:"test",env:p.a.envs.TESTNET}).getNFTs(e).then((function(e){return i(e)})).catch((function(e){console.log("e",e)}))}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)("header",{children:b?(e=b.address,e&&"".concat(e.substring(0,5),"...").concat(e.substring(e.length-4,e.length))):Object(g.jsx)("button",{type:"button",onClick:x,children:"Connect to MetaMask"})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:Object(g.jsxs)("form",{name:"marketplace",id:"marketplace",children:[Object(g.jsx)("select",{id:"chains",name:"chain",form:"marketplace",defaultValue:t.get("chain")||"All",style:{height:"30px",width:"200px",marginRight:"10px"},children:S.map((function(e){return Object(g.jsx)("option",{value:e.chainId,children:e.name},e.chainId)}))}),Object(g.jsx)("select",{id:"sort",name:"sort",form:"marketplace",defaultValue:t.get("sort")||"listed_desc",style:{height:"30px",width:"200px",marginRight:"10px"},children:A.map((function(e){return Object(g.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(g.jsx)("input",{id:"search",name:"search",placeholder:"Search",defaultValue:t.get("search"),form:"marketplace",style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("input",{id:"userAddress",name:"userAddress",placeholder:"User Address",defaultValue:t.get("userAddress"),form:"marketplace",onChange:function(e){return h(!!e.target.value)},style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("input",{id:"contractAddress",name:"contractAddress",placeholder:"Contract Address",defaultValue:t.get("contractAddress"),form:"marketplace",onChange:function(e){return h(!!e.target.value)},style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("input",{id:"limit",name:"limit",placeholder:"limit (min 30 max 100)",defaultValue:t.get("limit"),form:"marketplace",style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("input",{id:"skip",name:"skip",placeholder:"skip",defaultValue:t.get("skip"),form:"marketplace",style:{height:"30px",width:"200px",marginRight:"10px"}}),(o||t.get("chainId"))&&Object(g.jsx)("input",{id:"chainId",name:"chainId",required:o,defaultValue:t.get("chainId"),placeholder:"chainId",form:"marketplace",style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("button",{type:"submit",children:"submit"})]})}),Object(g.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:a.map((function(e){return Object(g.jsx)(E,Object(u.a)({},e),e.id)}))})]})]})},R=function(){var e,t=Object(o.f)(),n=t.contractAddress,a=t.chainId,i=t.nftId,s=Object(r.useContext)(k).provider,l=Object(r.useState)({}),u=Object(d.a)(l,2),h=u[0],x=u[1],f=Object(r.useState)(null),O=Object(d.a)(f,2),m=O[0],v=O[1],y=Object(r.useState)(null),w=Object(d.a)(y,2),I=w[0],E=w[1];Object(r.useEffect)((function(){c=new p.a({env:p.a.envs.TESTNET}),s&&c.initWallet(p.a.networkTypes.EVM,s),c.getAllNFTData(n,i,a).then((function(e){var t;if(x(e.nft),v(e.userAvailableMethods),null!==(t=e.userAvailableMethods)&&void 0!==t&&t.canSell){var n=c.getAvailablePaymentMethods(a);E(n)}}))}),[s]);var S=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n){var r;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.initWallet(p.a.networkTypes.EVM,s),c.setStatusListener((function(e){return console.log(e)})),r=n?t.externalOrderId:t.orderId,e.prev=3,e.next=6,c.buy(r,n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("e",e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c.initWallet(p.a.networkTypes.EVM,s),c.setStatusListener((function(e){return console.log(e)})),86400,e.prev=4,e.next=7,c.list(n,t.target.price.value,86400);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t,n){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c.initWallet(p.a.networkTypes.EVM,s),c.setStatusListener((function(e){return console.log(e)})),86400;try{c.offer(n,t.target.price.value,86400)}catch(r){console.error(r)}case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(Object(j.a)().mark((function e(t){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.initWallet(p.a.networkTypes.EVM,s),c.setStatusListener((function(e){return console.log(e)})),e.prev=2,e.next=5,c.cancelOrder(t.orderId);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}();return h?Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:h.preview,alt:h.name,style:{maxWidth:"300px",maxHeight:"300px"}}),Object(g.jsx)("h1",{children:h.contractName}),Object(g.jsx)("h2",{children:h.name}),h.price&&Object(g.jsxs)("h3",{children:["Price:",h.price]}),h.externalOrderPrice&&Object(g.jsxs)("h3",{children:["External Order Price:",h.externalOrderPrice]}),Object(g.jsxs)("h5",{children:["Description:",h.description]}),Object(g.jsxs)("div",{children:[(null===m||void 0===m?void 0:m.canSell)&&Object(g.jsxs)("form",{onSubmit:function(e){A(e,h)},children:[Object(g.jsx)("input",{name:"price",placeholder:"price",style:{height:"30px",width:"200px",marginRight:"10px"}}),I&&Object(g.jsx)("select",{defaultValue:I[0].value,name:"paymentMethod",style:{height:"30px",width:"200px",marginRight:"10px"},children:I.map((function(e){return Object(g.jsx)("option",{value:e.address,children:e.value},e.address)}))}),Object(g.jsx)("button",{type:"submit",children:"List for sale"})]}),(null===m||void 0===m?void 0:m.canOffer)&&Object(g.jsxs)("form",{onSubmit:function(e){C(e,h)},children:[Object(g.jsx)("input",{name:"price",placeholder:"price",style:{height:"30px",width:"200px",marginRight:"10px"}}),Object(g.jsx)("button",{type:"submit",children:"offer"})]}),(null===m||void 0===m?void 0:m.canBuy)&&Object(g.jsx)("button",{onClick:function(){return S(h,!1)},type:"button",children:"Buy"}),(null===m||void 0===m?void 0:m.canCancel)&&Object(g.jsx)("button",{onClick:function(){return R(h)},type:"button",children:"Cancel Listing"}),!!h.externalOrderPrice&&Object(g.jsx)("button",{onClick:function(){return S(h,!0)},type:"button",children:"External Buy"})]}),Object(g.jsx)("div",{children:!(null===(e=h.attributes)||void 0===e||!e.length)&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h2",{children:"Attributes:"}),h.attributes.map((function(e){return Object(g.jsxs)("div",{children:[e.trait_type,":",e.value]},"".concat(e.trait_type,"_").concat(e.value))}))]})})]}):Object(g.jsx)(g.Fragment,{})},T=function(){return Object(g.jsx)(l.a,{children:Object(g.jsxs)(o.c,{children:[Object(g.jsx)(o.a,{path:"/user/:chainId/:userAddress",children:Object(g.jsx)(C,{})}),Object(g.jsx)(o.a,{path:"/token/:chainId/:contractAddress/:nftId",children:Object(g.jsx)(R,{})}),Object(g.jsx)(o.a,{path:"/collection/:chainId/:contractAddress",children:Object(g.jsx)(C,{})}),Object(g.jsx)(o.a,{path:"/",children:Object(g.jsx)(C,{})})]})})};s.a.createRoot(document.getElementById("root")).render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(I,{children:Object(g.jsx)(T,{})})}))}},[[746,1,2]]]);
//# sourceMappingURL=main.cce61b97.chunk.js.map